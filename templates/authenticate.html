<!DOCTYPE html>
<html>
<head>
    <title>Face Authentication</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <h1>Face Authentication</h1>
    <div>
        <video id="video" width="640" height="480" autoplay></video>
    </div>
    <div>
        <canvas id="canvas" width="640" height="480"></canvas>
    </div>
    <script>
        const video = document.getElementById('video');
        const canvas = document.getElementById('canvas');
        const context = canvas.getContext('2d');

        // Access the webcam
        async function startVideo() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                video.srcObject = stream;
            } catch (error) {
                window.alert('Error accessing webcam: ' + error);
            }
        }

        // Capture a frame from the webcam and send to server
        async function captureFrame() {
            context.drawImage(video, 0, 0, canvas.width, canvas.height);
            const dataURL = canvas.toDataURL('image/jpeg');

            // Send captured frame to server for authentication
            $.ajax({
                type: 'POST',
                url: '/authenticate',
                data: { image: dataURL },
                success: function(response) {
                    window.alert('Authentication result: ' + response);
                },
                error: function(error) {
                    window.alert('Error sending captured frame: ' + error);
                }
            });

            // Capture the next frame after a delay
            setTimeout(captureFrame, 500);
        }

        startVideo();
        captureFrame();
    </script>
</body>
</html>